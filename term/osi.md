## OSI
- Open System Interconnection
- 기본적인 하드웨어 또는 소프트웨어의 변경없이 서로 다른 시스템간에 개방 통신을 위한것

### 장점
- 복잡한 네트워크 작동을 몇개의 계층으로 나누어서 이해가 쉽다
- 전체 레이어를 바꾸지 않고도 한 레이어를 바꿀수 있다.
- 인접 계층을 염두에 두지 않고, 한번에 하나의 계층에만 관심을 집중할수 있다.

### 모델
- 모든 유형의 컴퓨터 시스템 간의 통신을 허용하는 네트워크 시스템의 설계를 위한 계층 구조
- 장치 A로부터 장치 B까지 메시지를 전송할 때 연관되는 계층

### P2P process
- 해당 계층에서 통신하는 각 장치상의 프로세스

### 구조
- 계층 1,2,3(네트워크 지원) : 물리, 데이터링크, 네트워크로써 하나의 장치에서 다른 장치로 전송되는 데이터의 물리적인 면을 처리
- 계층 4(전송) : 두개의 서브 그룹을 링크하고 하위층이 전송한 내용을 상위층이 사용할수 있는 형태로 변환
- 계층 5,6,7(사용자 지원) : 세션, 표현, 응용으로써 관련 없는 소프트웨어 시스템간의 상호 운용성 제공

### 상세
#### 물리계층(L1)
- 물리적 매체를 통한 비트 스트림 전송에 요구되는 기능을 담당(케이블, 커넥터)
- 데이터 링크층으로부터 한 단위의 데이터를 받아 통신 링크를 따라 전송 될수 있는 형태로 변환
- 비트 스트림을 전자기 신호로 변환
- 매체를 통한 신호 전송 감독

##### 고려사항
- 회선구성
- 데이터 전송모드
- 접속 형태(topology)
- 신호방식(신호유형)
- 부호화
- 인터페이스
- 전송매체

#### 데이터링크 계층(L2)
- 하나의 지국에서 다른 지국으로 오류없는 데이터 전달에 대한 책임을 가짐
- 세번째 층으로부터 데이터를 받아서 주소와 제어정보를 포함하고 시작과 끝에 의미있는 비트를 추가한다(프레임)
- 물리계층을 통해 얻은 이진신호 점검
- 오류체크나 복구기능한다.

##### 기능
- nodeTonode전달(stationTostation)
- 주소지정
- 접근제어
- 흐름제어
- 오류처리
- 동기화

##### L2 스위치
- 허브에서 한단계 진화한 스위치
- 패킷이 왔을때 그것의 목적지가 어디인가를 보고 그 목적지로 패킷을 보내주는 역할 한다.
- IP주소가 필요한 외부로는 보낼수없다. Route는 지원하지 못함
- Ethernet레벨에서 동작할뿐 네트워크 계층에서는 동작하지 못함

#### 네트워크 계층(L3)
- 다중 네트워크 링크를 통해 개별적인 패킷의 발신지-대-목적지(endToend) 전달에 대한 책임을 가짐
- 스위칭(물리적 링크간의 일시적인 연결)과 라우팅(한지점에서 다른지점으로 패킷을 전송할수 있는 경로가 많을때, 최적의 경로를 선택)을 제공

##### 기능
- 발신지-대-목적지 전달(packet)
- 논리적인 주소지정
- 라우팅
- 주소 변환
- 다중화

##### L3 스위치
- 자신에게 온 패킷이 외부에 존재하는 IP일 경우, 그 패킷을 외부에 연결된 라우터로 보내주는 기능을 가진다.

#### 전송 계층(L4)
- 전체 메세지의 발신지-대-목적지 전달에 대한 책임을 가짐

##### 기능
- EndToend 전달
- 서비스-점 주소 지정
- 분할과 재조립
- 연결 제어
- 포트넘버를 이용 트래픽 분산처리

##### L4 스위치
- TCP/UDP 헤더를 확인후 우선시 해서 로드 벨런싱을 한다.
- vip지정을 통한 Load Balace 및 Fail over
- real ip를 묶은 vip로 향하는 트래픽은 RR(round robin)방식으로 로드벨런싱 된다.

##### 로드 벨런스
- 어느 한 회선이 다운되더라도 다른 회선으로 서비스를 계속하기 위한 것
- 각각의 회선 용량을 합하여 사용함으로써 웹서버 회선 총 용량을 늘리기 위한 것

#### 세션 계층(L5)
- 네트워크 대화 제어자
- 프로세스 간의 통신을 제어하고, 통신 과정이 진행될때 동기화를 유지(각종 이벤트)

##### 기능
- 세션 관리
- 동기화
- 대화 제어
- 원활한 종료

#### 표현 계층(L6)
- 통신 장치간의 상호 운용성을 보장
- 필요에 따라 보안 목적을 위한 데이터 암호화와 복호화 기능
- 데이터 압축및 확장 기능

##### 기능
- 변환
- 암호화
- 압축
- 보안

#### 응용 계층(L7)
- 네트워크 상의 소프트웨어 사용자에게 사용자 인터페이스 제공과 서비스 지원
- 소프트웨어를 장치에 올려서 트래픽 필터, 보안, VPN을 할수 있다.
- 상위 계층 장비는 하위 계층 장비의 기능을 모두 가지고 있다.
- TCP/IP기반이기 때문에 L7이 L5,L6기능을 모두 포함하고 있다.

##### 서비스
- 네트워크 가상 터미널
- 파일 엑세스, 전송, 관리
- 메일링
- 디렉토리 서비스

##### L7 스위치
- HTTP의 URL, FTP 쿠키정보 및 바이러스 패턴을 분석해서 보안에 더 유리하고 정교한 로드밸런싱이 가능하다.
- L7정보가 주로 어플리케이션과 직접 연관있고 패킷의 내용을 분석하여 이를 바탕으로 패킷에 대한 부하분산, 리다이렉션, 필터링들을 수행하기 때문에 L7스위치의 이름이 다양하다.

#### 참고
##### L3
- 라우터는 L3장비이며, IP layer에서 동작한다.
- 스위치는 MAC을 보고 포워딩한다.
- 라우터는 IP layer를 보고 포워딩 한다.
- 하드웨어적으로 IP를 분석해서 경로를 설정하고 포워딩하는 기술이 발전해 L3 스위치가 나왔다.

##### L4와 L7 차이
- L7스위치는 L4의 연장선상에서 출발했다.
- L4스위치는 VoIP나 P2p와 같은 중요 어플리케이션과 같이 다양한 형태의 패킷 내용을 살펴보기 어렵고 또한 사용자의 IP가 수시로 바뀌는 경우 해당 사용자에 대한 연속적인 서비스를 제공하기 어렵다.
- L4스위치는 4계층정보(TCP/UDP port)를 바탕으로 패킷을 분류하고 원하는 서버나 장비로 전송한다.
- L7스위치는 패킷의 내용을 보고 이를 바탕으로 패킷을 전달하여, 적절한 서버를 선택할수 있다.
- L7스위치는 기존의 L4스위치가 갖고 있던 기능들을 모두 수용하면서 불필요한 트래픽에 대한 차단이나 네트워크에 대한 공격을 완화시켜줌으로써 서버와 네트워크의 가용성을 한층 향상시켜준다.
- L7스위치는 바이러스와 같이 특정한 패턴을 갖고있는 패킷으로부터 서버나 네트워크에 불필요한 트래픽을 제어한다.
- L7스위치는 트래픽의 유입수준을 일정정도로 제한하여 서버가 정상적인 서비스를 할수 있게 보호해준다.

##### TCP/IP기반
- L1 : 네트워크 인터페이스 계층
- L2, L3 : 네트워크(인터넷) 계층
- L4 : 전송 계층
- L7 : 응용 계층

### reference
- http://soul0.tistory.com/140

