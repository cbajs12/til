# 직접 링크 네트워크

## 링(802.5, FDDI, RPR)
- 고리 모양으로 연결된 노드의 집합으로 구성된다.
- 데이터는 항상 링을 따라 하나의 특정 방향으로만 전달된다. 각 노드는 위쪽 이웃으로부터 프레임을 받아서 아래쪽 이웃으로 전달한다. 독립적인 점대점 링크들이 루프를 형성한 형태로 볼수 있다.
- 토큰링과 이더넷의 유사한 점: 각 노드가 언제 전송할 수 있는지를 제어하는 분산 알고리즘이 필요, 모든 노드가 모든 프레임을 볼 수 있으며, 프레임 헤더에 있는 목적지에 해당되는 노드는 프레임이 지나갈때 이를 복사하여 갖는다.
- 토큰링의 기본 개념은 각 노드가 토큰을 받고 이를 다시 전송하면서 토큰이 링을 따라 돌도록 하는 것이다. 토큰은 특정 비트 열이다. 전송할 프레임을 갖고 있는 노드가 토큰을 받으면, 노드는 토큰을 전송하지 않고 프레임을 보낸다. 각 노드는 프레임을 단순히 다음 노드로 전달하며, 목적지 노드만 프레임을 복사한다. 프레임이 송신자로 돌아오면, 송신 노드는 프레임을 계속 전송하던 것을 중단하고 토큰을 전송한다. 각 노드는 링을 통하여 도는 토큰을 가지면 전송할 기회가 생기는 것이다. 노드는 라운드 로빈 방식으로 서비스 된다.
- 단점: 링크나 노드 한 부분이 고장나면 전체 네트워크가 고장난다. 대안으로는 각 지국이 전자기계식 relay를 사용하여 링에 연결함으로써 노드가 고장나면 relay를 가동시켜 고장 노드를 링에서 제외한다.

### 토큰링 매체 접근 제어
- 토큰링의 어댑터는 수신기와 발신기로 구성된다.
- 해당 노드가 목적지나 발신지가 아닌 경우 어댑터는 수신기가 수신한 데이터를 단순 재전송한다. 링에 연결된 어느 지국도 보낼 데이터가 없을때는 토큰이 링을 순회한다. 보낼 데이터가 생겼을때 토큰을 가진다. 토큰을 소유한 지국은 하나 이상의 패킷을 보낼수 있다.
- 전송되는 각 패킷은 원하는 목적지의 주소를 포함한다. 둘 이상의 수신자로 보낼때는 멀티캐스트 주소를 포함할 수도있다. 패킷이 링의 각 노드를 지나감에 따라 각 지국은 패킷 속을 보고 자신이 목적지인가를 살핀다. 목적지라면 어댑터로 패킷이 지나갈때 버퍼로 데이터를 복사하며, 링에서 제거하지는 않는다. 송신 지국만 링에서 패킷을 제거할 의무가 있다.
- 토큰 보유시간(THT): 한 노드가 얼마나 오랜 동안 토큰을 갖고 있을수 있는가
- 802.5 프로토콜은 보유시간 문제를 다양한 수준의 우선순위를 지원해서 해결한다. 토큰이 3비트의 우선순위 필드를 포함하고 있기 때문에 어떤 시점에 토큰은 어떤 우선순위 n을 가진다고 생각할수 있다. 패킷을 송신하고자 하는 각 장치는 해당 패킷에 대해 우선순위를 할당하며, 패킷의 우선순위가 최소한 토큰의 우선순위만큼은 되어야 패킷을 전송하기 위해 토큰을 잡을 수 있다. 토큰의 우선순위는 프레임 헤더에 있는 3비트 예약 비트를 사용하여 변경된다.
- 신뢰성 있는 전송을 위하여 패킷 트레일러의 두 비트인 A와 C비트를 사용한다. 초기에는 모두 0으로 설정된다. 자신이 지정된 수신자의 지국이 프레임을 받으면, 프레임의 A비트를 1로 설정한다. 그리고 어댑터로 프레임을 복사하면, C비트를 1로 설정한다. 송신지국으로 돌아온 프레임 A비트가 0이라면 수신지국이 동작하지 않는 다는 것이다. A비트가 1이고 C비트는 0이라면, 수신지국이 프레임을 수신하지하지 못했다는 것으로 프레임을 재전송한다.
- 송신자는 프레임에 바로 이어서 토큰을 링에 넣거나(초기 방출), 전송한 프레임이 링을 모두 돌아와서 제거된 뒤에 내놓을수 있다(지연 방출), 초기 방출이 좋은 이유는 링이 큰 경우에는 좋은 대역폭 사용률을 얻을 수 있기 때문이다.

### 토큰링 관리
 - 각각의 토큰링은 감시 지국을 가지고 있다. 링이 정상적으로 동작하도록 하는 것이다.
 - 정상적인 감시 지국은 주기적으로 특별한 제어 메시지를 보내서 자신의 존재를 알린다. 일정시간 이 메시지를 받지 못하면, 감시 지국이 고장났다고 가정하고 다른 지국이 감시 지국이 되려고 시도한다.
 - 새로운 감시 지국이 필요하다고 판단하면, 청구 프레임을 전송하여 새로운 감시 지국이 되고자 함을 알린다. 같은 시점에 다른 지국도 이러한 시도를 한다면, 최상위 주소가 이긴다 라는 규칙을 이용하여 동률 경우를 정리하여야 한다.
 - 토큰은 오류나 고장으로 유실될수 있는데, 토큰이 실종되었다는 것을 감지하기 위해서 감시 지국은 토큰의 회전을 관찰하며, 최대로 가능한 토큰 회전시간에 해당하는 타이머를 유지한다.(`NumStations * THT + RingLatency`)
 - 감시지국은 변길되거나 고아가 된 프레임을 검사한다. 이들을 링에서 제거하고 토큰을 새로 넣는다. 고아 프레임은 프레임을 송신한 지국이 이를 제거하기 전에 죽은 것을 말한다. 이를 위하여 모니터 비트라는 헤더 비트를 사용한다. 감시지국을 지나갈때 이 헤더를 1로 바꾸고 다음번 회전에도 1이 발견되면 2번째 회전임을 알고 제거한다.
 - 감시 지국 비동작 중인 지국을 감지해내는 것도 한다. 의심이 가는 목적지를 향해 신호 프레임을 전송하여 이 프레임이 얼마나 오래 지속되는가에 따라 링의 상태를 설정할수 있다.
 - 프래임 형식은 비정규 맨체스터 코드를 사용한다.

###  FDDI
- 802.5와 유사하지만 구리선이 아닌 광케이블에서 작동한 다는 점, 반대방향으로 데이터를 전송하는 이중 링 구조를 가진다는 점 그리고 모든 노드들이 링 관리에 참여한다는 점이 차이점이다.
- 두번째 링은 정상 동작중에는 사용되지 않다가 첫번째 링이 고장날 경우 사용되어진다. 그 결과 하나의 케이블/지국이 고장나더라도 견딜 수 있다.
- 토큰이 링을 한바퀴 돌아오는 최대 예상 시간(TRT)를 각 노드들이 가지고 있으며 연속되는 토큰 도착 사이의 시간을 측정한다. 너무 오랜 시간 토큰이 도착하지 않으면, 토큰이 상실된 것으로 판단 청구 프레임을 보낸다. 이때 그 지국의 TRT값을 청구 프레임에 넣는다.
- 청구 프레임은 다른 노드가 다른 TRT를 원하면 수신된 청구 프레임을 자신의 청구 프레임으로 바꾸고, 그렇지 않다면 그대로 흘려 보낸다. 또한, 자신이 보낸 청구 프레임이 그대로 링 전체를 돌아온다면, 토큰을 재생성할 권한을 인정받은 것이다.
- 단점으로는 노드가 규칙적으로 전송할 기회를 보장할 수 없다는 것이다. 이를 위하여 동기와 비동기라는 두 종류의 트래픽을 정의하고 토큰이 일찍 오건 늦게 오건 동기 데이터는 항상 보낼수 있고, 반대로 비동기 데이터는 TRT보다 토큰이 일찍 도착해야 한다.

### 패킷 링(RPR)
- 링크나 노드의 고장으로부터 빠르게 복구하는 능력인 탄력성이 핵심 설계 목표이다. 또한, 대역폭 효율성과 서비스 품질(QoS) 지원등들도 설계 목적들이다.
- RPR은 두개의 서로 반대로 회전하는 광섬유 링으로 구성된다. 그러나 두 링 모두 정상 동작에서도 사용한다. 다른 링들과 다르게 RPR 프레임을 링에서 제거하는 것은 수신 노드이며, 링의 대역폭을 부분적으로 사용가능하게 해주었다(공간적 재사용).
- RPR은 토큰을 사용하지 않고 버퍼 삽입 기법을 사용한다. 이 기법에서 노드는 포워드할 다른 프레임이 없으면 언제라도 자신의 프레임을 전송할 수 있다. 노드가 자신 프레임을 전송중에 다른 프레임이 도착한다면, 도착 프레임을 버퍼에 저장한다.
- RPR은 고장을 극복하기 위하여 FDDI의 방법과 방향바꾸기를 사용한다. 방향바꾸기는 고장에 인접한 노드들이 다른 노드들에게 고장을 알고, 노드들은 고장이 나지 않은 쪽으로 링을 돌아서 목적지에 가도록 패킷을 보내는 것이다.

## 무선 네트워크
- 무선링크는 비대칭 형태이다. 양 끝이 대개 다른 종류의 노드이다. 한쪽은 기지국이며, 다른 한쪽은 클라이언트 노드로 이동성을 가지며, 모든 통신은 기지국과의 링크에 의존한다.
- 공동 기지국 모델은 클라이언트 노드 사이의 직접 통신을 허용하지 않는다. 이러한 토폴로지는 3가지 수준의 이동성을 가져온다. 첫번째 수준은 이동성이 없는 것으로 고정된 위치에 수신자가 있어야 한다. 두번째 수준은 기지국으로부터 유효 범위 안에 있어야 하는 것이고, 세번째 수준은 기지국 사이에서 이동성이 있는 것으로 wifi, 이동통신이 해당된다.
- mesh/adhoc 네트워크: 모든 노드가 동료 관계이다. 메시지는 동료 노드들의 연속 고리를 따라 포워드 된다. 메시지가 A에서 B로 가는 데 있어 복수 개의 경로를 제공하기 때문에 장애 감내 기능도 함께 지원한다. 또한 노드들이 어느 저옫의 복잡한 하드웨어 및 소프트웨어를 지원해야 한다.

### 블루투스
- 장치 사이의 매우 짧은 영역 통신이다.
- 블루투스는 산업 공동체에서 규정되고 있으며, 링크 부터 프로파일이라는 응용 프로토콜까지 프로토콜 모음을 규정하고 있다.
- 피코넷이라 불리는 블루투스 기본 네트워크 구성은 마스터 장치와 최대 7개의 슬레이브 장치로 이루어 진다. 모든 통신은 마스터와 슬레이브 사이에 이루어지며, 슬레이브끼리는 직접 통신할 수 없다.
- 블루투스는 인가면제 대역에서 동작하기 때문에 대역 내에 있을 수 있는 간섭 현살을 해결하는 확산 스펙트럼을 반드시 사용해야한다.
- 블루투스는 채널(주파수)을 한번에 625us씩 사용하는 주파수 홉핑을 사용한다. 이것은 자연스럽게 동기식 시분할 다중화의 시간 슬롯이 된다.
- 슬레이브 장치는 일시 정지 될수 있다. 마스터만이 재활성화 시킬수 있다.

### 와이파이
- 제한된 지역안에서 사용을 위해 설계되었다.
- 공유 통신 매체에 대한 접근을 조정하는 것이 주된 문제가 된다. 공중을 통해 신호가 전달된다.
- 무선 프로토콜은 이더넷과 같은 프로토콜(링크가 빌때까지 기다리고 충돌나면 백오프한다.)을 사용하는 것 같이 보이지만, 어떤 노드가 다른 노드로부터 너무 멀리 떨어져서 송신 내용을 들을 수 없는 경우도 발생할 수 있어서 문제는 복잡해진다.
- A와 C가 서로 B와 통신하기 위해 프레임을 보낸다면, 두 프레임은 B에서 충돌하지만 A와 C는 충돌 사실을 알수가 없다. A는 C를 확인 못하고, C는 A를 확인 못한다 이것을 서로에 관해 `잠복노드`라고 한다.
- `노출 노드`는 B는 A와 C를 확인하고, C는 B와 D를 확인하는 상황에서, C가 D로 전송되는 동안, B가 A에게 전송한다면 간섭을 일어나지 않는다.
- 두 문제를 해결하기 위한 알고리즘을 `충돌 회피를 통한 다중 접근`이라고 한다. 송신자가 데이터를 실제로 전송하기 전에 , 송수신자가 서로 제어 프레임을 교환하는 것이다. 이 교환은 모든 근접 노드들에게 전송이 시작될 것이라는 것을 알린다. 
- 송신자는 송신 요청 프레임(RTS)을 수신자에게 보내는데, RTS에는 얼마나 오랜동안 송신자가 매체를 잡고 있을지를 나타내는 항목을 포함하고 있다. 수신자는 송신 허락(CTS) 프레임을 응답하며, 이 프레임에는 송신자가 보낸 길이를 그대로 되돌려 보내서 확인하는 기능이 포함되어 있다. CTS 프레임을 들을 수 있는 모든 노드는 자신이 수신자에서 가까운 위치에 있다는 것을 알게되어 규정된 길이의 프레임을 보내는 동안 전송을 하지 않는다. 
- 802.11 네트워크는 기지국 기반 토폴로지로 사용된다. 기지국을 AP라 부르며, 배포 시스템에 의해 서로 연결된다. 이 시스템은 무선 링크와 같은 계층인 OSI 구조 계층 2에서 동작한다. 각 노드들은 AP를 통하여 AP와 연결된 다른 노드와 통신한다.

### WIMAX(802.16)
- 가입자용 링크 기술로서 계획되었다. 대도시망으로 분류된다. 최근에는 이동성을 추가하는 작업이 있다.
- 시분할(TDD)는 같은 주파수를 교대로 사용하는 동기식 시분할 다중화이다. 주파수분할 이중화(FDD)는 다른 주파수를 쓰는 두 트래픽의 주파수 분할 다중화이다. 인가면제 대역에서는 TDD만을 사용한다.

### 이동전화기술
- 2G기술은 GSM을 사용한다.
- FDM과 TDM을 혼합하여 사용하거나 CDMA(코드분할 다중접근)을 사용한다.
- GSM 네트워크는 TDMA(시분할 다중접근)을 다중화 기술로 사용한다.

## 센서 네트워크
- 최대 수만개와 연결되어 있는 무선 네트워크이다.
- 노드는 지리적 영역의 상태를 관찰하는 것을 목적으로 한다.
- 센서 정보가 기지국으로 전달되기는 하지만 대부분의 노드들은 기지국과는 링크로 직접 연결되어 있지 않다. 노드들은 자신과 가장 가까운 이웃들과만 통신하고, 이웃들을 통하여 기지국에 메시지를 도달되도록 한다.
- 통합지점 이라는 노드가 이웃 노드들로부터 수신한 데이터를 수집하고 처리한뒤 처리된 데이터를 전송하는 방법이나 노드들이 집단을 결성하여 한 노드를 클러스터 헤더로 지정하고 모든 데이터는 헤더를 통과해서 경로를 잡는 방법이 있다.
- 비콘: 자신의 절대 위치를 결정해서 알고 있는 노드
