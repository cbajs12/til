# 보안

## 보안 방어의 구현
- 대부분의 보안 전문가들은 더 많은 층의 보안이 더 적은 층의 보안보다 나음을 언급하는 심층 방어 이론에 동의한다.

### 보안 정책
- 컴퓨터 사용의 어떠한 측면에 있어서도 보안을 증대시키기 위한 첫 번째 단계는 보안 정책을 갖는 것이다. 정책은 여러 가지가 있을 수 있지만 일반적으로 보호되어야 할 것이 무엇인지에 대한 기술을 포함한다. 적절한 정책 없이 사용자와 관리자는 무엇이 허용되고, 무엇이 요구되며, 무엇이 허락되지 않는지를 알 수 없다. 정책은 보안에 대한 로드맵이며, 사이트가 불안전한 상태에서 더 안전한 상태로 이동하려면 어떻게 그 상태에 도달할 수 있는지를 알 수 있는 지침이 필요하다.

### 취약점 평가
- 보안 정책이 적절히 구현되었는지를 결정할 수 있는 방법은 취약점 평가를 실행하는 것이다. 그러한 평가는 사회 공학에서 위험 평가를 위한 포트스캔에 이르기까지 넓은 범위를 다룰 수 있다.
- 대부분의 취약점 평가의 핵심적 활동은 알려진 취약성에 대해 검사를 실행하는 침입 테스트이다.
- 취약점 스캔은 영향을 최소화하도록 컴퓨터가 비교적 한가할 때 한다. 적절하다면 취약점 스캔은 목표 시스템이나 네트워크 장치가 정상적으로 동작하지 못하게 할 수 있기 때문에 생산 시스템보다는 테스트 시스템에서 행해진다.
- 보안 스캔은 여러 가지 측면을 검사할 수 있다. 짧거나 쉬운 패스워드, set-uid 프로그램과 같은 인가되지 않은 특권 프로그램, 시스템 디렉터리 내의 인가되지 않은 프로그램, 예상 외로 길게 실행되는 프로세스들, 사용자나 시스템 디렉터리의 부적당한 디렉터리 보호, 패스워드 파일과 같은 시스템 자료 파일, 장치 드라이버 또는 OS 커널의 부적절한 보호, 프로그램 탐색 경로의 위험스러운 항목, 체크섬 값에 의해 탐지된 시스템 프로그램의 변경, 예기치 않은 또는 숨은 네트워크 데몬들을 탐지한다.
- 네트워크로 연결된 컴퓨터들은 단독 시스템들보다는 보안 공격에 대해 보다 많이 노출되어 있다. 직접 연결된 터미널 등과 같이 이미 알려진 접근 지점으로부터의 공격 위험성보다는 모르는 대규모의 접근 지점으로부터의 공격 위험성이 더 크며, 이들은 잠재적으로 심각한 보안 문제를 야기한다.
- 취약점 스캔은 네트워크 보안에 관한 문제들 중 일부를 다루기 위해 네트워크에 적용될 수 있다. 이 스캔은 네트워크에서 봉쇄되거나 사용불능이 될 수 있는 포트들을 검색한다. 그러면 스캔은 그 포트를 듣고 있는 애플리케이션에 대한 세세한 것을 결정할 수 있고 각각 알려진 취약점을 가지고 있는 지를 결정하려고 시도할 수 있다.
- 포트 스캐너가 크래커에 의하여 공격을 위한 취약점을 찾는데 도움을 줄 수 있다.

### 침입 탐지
- 시스템 및 설비를 보호하는 것은 침입 탐지와 관련되어 있다. 침입 탐지는 컴퓨터 시스템 내에 들어가려고 시도했거나 성공한 침입을 탐지하고 침입에 대해 적절한 대응을 개시하는 것이다.
- 시스템 침입을 탐지하기 위한 설계 공간의 자유로움이 `침입 탐지 시스템(IDS)`과 `침입 방지 시스템(IDP)`으로 알려진 해결책을 만들었다. IDS 시스템은 침입이 탐지되었을 때 경고를 발생시키는 반면, IDP 시스템은 라우터처럼 동작하며 침입이 탐지되지 않을 경우 트래픽을 그대로 통과시킨다.
- 침입의 적절한 명세를 정의하는 것은 매우 어렵다. 그래서 전형적으로 자동 IDS, IDP들은 두 가지의 비교적 야심차지 않은 방법 중 하나를 택하여 시스템을 구축하였다. 첫 번째는 `서명 기반 탐지`라 불리며, 시스템 입력 또는 네트워크 트래픽에서 침입을 의미하는 것으로 알려진 특정 행위 패턴(서명)을 검사한다. 서명 기반 탐지의 간단한 예는 한 계정에 대한 여러 번의 로그인 실패를 모니터링하는 것이다. 또 한가지는 바이러스를 찾기 위해 이진 파일을 스캔하는 것이다.
- 두 번째 방법은 `이상 탐지`이며, 컴퓨터 시스템 내에서 비정상적인 행위를 탐지하는 테크닉을 사용한다. 물론 모든 비정상적인 시스템 행동이 침입을 의미하는 것은 아니지만, 침입은 종종 비정상적인 행동을 유발한다고 가정할 수 있다. 이상 탐지의 예는 데몬 프로세스의 시스템 호출을 모니터링하여 시스템 호출의 동작이 정상적인 패턴을 이탈하는지 탐지하는 것이다. 다른 예는 사용자의 비정상적인 명령을 탐지하기 위해 셸 명령을 모니터링하거나, 한 사용자의 비정상적인 로그인 시간을 탐지할 수도 있다.
- 서명 기반 탐지와 이상 탐지는 동전의 양면이다. 서명 기반 탐지는 위험한 행동을 명시하고, 이러한 행위가 발생할 때는 탐지하는 반면, 이상 탐지는 정상적인 행위를 명시하고, 그와는 다른 사건이 발생하는 것을 탐지한다.
- 그러나 이러한 다른 접근 방법들은 매우 다른 특성을 갖는 IDS, IDP들을 만들었다. 특별히 이상 탐지는 예전에 미처 알려지지 않았던 침입 방법(zero-day 공격들)을 탐지한다. 서명 기반 탐지는 인식 가능한 패턴으로 코드화된 이미 알려진 공격들을 찾아낸다. 따라서 서명 기반 탐지 방법이 생성될 때 예견되지 못한 새로운 침입 방법은 서명 기반 탐지 시스템을 피하기가 쉽다.
- 이상 탐지 기법이 서명 기반 탐지보다 좋은 것도 아니다. 이상 탐지 기법을 사용한 시스템의 문제는 정상적인 시스템 동작을 정확히 벤치마킹하는 일이다. 시스템이 밴치마킹할 때 이미 침입이 되었다면, 침입 활동이 정상적인 벤치마크에 포함될 수도 있다. 침입자의 활동으로부터 전혀 영향 받지 않고 시스템이 깨끗하게 벤치마크 되었다 하더라도, 벤치마크가 정상적인 동작을 상당히 완벽하게 기술할 수 있어야 한다. 그러지 않다면 거짓 양성, 즉 거짓 경고 또는 더 좋지 않게는 거짓 음성, 즉 탐지 실패 횟수가 크게 증가하게 된다.
- 가용성을 위해서는 IDS는 매우 낮은 거짓 경고율을 제공해야 한다. 정상적인 시스템 동작을 적절히 벤치마킹하는 것은 매우 어렵기 때문에 충분히 낮은 거짓 경고율을 달성하는 것은 이상 탐지 시스템의 중요한 과제이다.

### 바이러스 보호
- 바이러스의 퇴치 프로그램의 경우 바이러스의 특정한 명령어 패턴을 찾음으로써 동작한다. 그들이 알려진 패턴을 찾았을 때 명령어들을 제거하고 프로그램을 치료한다.
- 몇몇 바이러스는 다른 소프트웨어를 감염시킬 때 자기 자신을 변형하여 바이러스 퇴치 프로그램의 기본적인 패턴 인식 방식을 피한다. 그에 따라 바이러스 퇴치 프로그램은 바이러스를 찾기 위해 하나의 패턴을 찾는 것이 아니라 패턴의 그룹을 찾게 된다. 또 다른 기술은 조정되거나 에뮬레이트되는 시스템의 영역의 `sandbox`에서 프로그램을 실행시키는 기술이다. 바이러스 퇴치 소프트웨어는 감시 없이 프로그램을 실행시키기 전에 샌드박스 안에 있는 코드의 행동을 분석한다. 몇몇 바이러스 퇴치 프로그램은 단지 파일 시스템의 파일들을 분석하기 보다는 완전한 방어를 구축한다. 그들은 부트 섹터, 메모리, 이메일, 다운로드 되는 파일들등에 대해 검사를 실행한다.
- 컴퓨터 바이러스에 대한 최선의 보호는 예방 또는 안전한 컴퓨터 사용이다.
- 매크로 바이러스에 대한 하나의 방어책은 Word 문서를 대체할 수 있는 파일 포맷은 `Rich Text Format(RTF)`으로 바꾸는 것이다. 원래의 Word 포맷과는 달리 RTF는 매크로를 첨부하는 기능이 없다.
- 또 다른 방어책은 모르는 사용자에게서 배달된 이메일의 첨부파일을 열지 않는 것이다.
- 또 다른 보호는 오직 안전한 소프트웨어만 업로드되고 각 프로그램의 서명은 안전한 메시지 요약 계산에 의해 얻어진다. 얻어진 파일이름과 연관된 메시지 요약 목록은 인증받지 않은 접근이 없는 곳에 보관되어야 한다. 각 프로그램을 실행할 때 OS는 주기적으로 또는 매번 서명을 다시 계산하고 원래의 리스트에 있는 서명과 비교한다.

### 검사, 회계 및 로깅
- 검사, 회계, 로깅은 시스템 성능을 감소시키지만 보안을 포함한 몇몇 영역에서 유용하다. 로깅은 일반적이거나 특정 목적을 가질 수 있다.모든 시스템 호출 실행은 프로그램의 행동을 분석하기 위해 로그로 남길 수 있다.
- 회계는 보안 문제를 드러낼 수 있는 성능상의 변화를 찾기 위해 사용될 수 있다.

## 방화벽을 이용한 시스템과 네트워크 보호
- 방화벽은 신뢰 가능한 시스템과 신뢰할 수 없는 시스템 사이에 존재하는 컴퓨터나 라우터이다. 방화벽은 두 보안 영역 사이의 네트워크 접근을 제한하고 모든 연결을 감시하고 기록한다. 예를 들어, 웹 서버는 웹 브라우저와 통신하기 위해 HTTP 프로토콜을 사용한다. 그러므로 방화벽은 방화벽 밖의 모든 호스트로부터 방화벽 내의 웹 서버에게 오로지 HTTP만 통과를 허용한다.
- 방화벽은 하나의 네트워크를 다수의 영역으로 분리할 수 있다. 일반적인 구현은 인터넷을 신뢰할 수 없는 영역, 비무장 지역(DMZ), 신뢰할 수 있는 영역으로 나눈다. 인터넷으로부터 DMZ 컴퓨터까지 연결이 허용되고 내부 컴퓨터로부터 인터넷으로는 허용되지만, 인터넷이나 DMZ 컴퓨터에서 내부 컴퓨터로는 허용되지 않는다. 선택적으로 DMZ와 하나 이상의 내부 컴퓨터간의 제어된 통신이 허용될 수 있다.
- 방화벽은 방화벽이 허용하는 프로토콜 또는 연결 안에서 동작하는 침입을 방지할 수 없다. 웹 서버에 대한 버퍼 오버플로우 공격은 방화벽이 HTTP 연결을 허용하기 때문에 막을 수 없다. 이 경우 공격은 HTTP 연결의 내용에 의한 것이기 때문이다. 마찬가지로 DoS 공격 역시 다른 시스템 만큼 방화벽에도 영향을 준다. 방화벽의 다른 취약점은 몇몇 인증 기준을 만족시킴으로써 허가되지 않은 사용자가 마치 허용된 사용자처럼 접속하는 위장이다.
- 대부분의 네트워크 방화벽에 덧붙여서 종종 새로운 종류의 각각의 장단점을 가지고 있는 방화벽이 있다. 개인 방화벽은 OS에 포함되어 있거나 애플리케이션으로써 추가되는 소프트웨어 층이다. 보안 도메인 간의 통신을 제한하기보다 그것은 특정 호스트로의 통신을 제한한다. 사용자는 개인 방화벽을 자신의 PC에 더함으로써 트로이 목마가 PC가 접속해 있는 네트워크로의 접근이 거부되도록 할 수 있다. 애플리케이션 프록시 방화벽은 애플리케이션이 네트워크를 가로 질러서 사용하는 프로토콜을 이해하고 있다. 예를 들어, SMTP는 메일 전송에 사용된다. 애플리케이션 프록시는 SMTP 서버가 하는 것처럼 연결을 받아들이고 SMTP 서버의 원래 목적지로의 접속을 초기화한다. 그것은 메시지를 전달할 때 트래픽을 감시하며, 불법적 명령이 실행되지 않게 하고, 버그를 제고하는 등의 일을 한다. 몇몇 방화벽은 하나의 특정한 프로토콜을 위해 설계되었다. 예를 들어, XML 방화벽은 XML 트래픽을 감시하고 허용되지 않거나 잘못된 XML을 맞는 특정한 목적을 가지고 있다. `시스템 호출 방화벽`은 애플리케이션과 커널 사이에 자리 잡고 시스템 호출 실행을 감시한다.

## 컴퓨터 보안 분류
- 미국방부의 TCSEC는 시스템의 보안을 A, B, C, D 네 단계로 분류하였다. 가장 낮은 수준의 분류는 단계 D 또는 최소 보호이다. 단계 D는 오직 한 등급으로 구성되고, 시스템이 평가되긴 했으나, 다른 어느 보안 등급의 요구사항도 충족시키지 못한 시스템에 대해 사용된다.
- 단계 C는 감사 능력을 활용하여 사용자와 그들의 행동에 대한 임의의 보호와 규명 가능성을 제공한다. 단계 C는 C1과 C2의 두 가지 수준을 가지고 있다. C1 등급의 시스템은 사용자가 자신의 개인 정보를 보호하고, 자신의 데이터를 다른 사용자가 우연히 읽거나 지우는 것을 방지하는 몇몇의 제어 기능을 가지고 있다. C1 환경은 상호 협력하는 사용자들이 같은 수준의 민감도를 가진 데이터를 접근할 수 있도록 한다.
- 컴퓨터 시스템(하드웨어, 소프트웨어, 펌웨어)의 보안 정책을 올바르게 시행하는 모든 보안 시스템의 총체는 Trusted Computer Base(TCB)라고 알려져 있다. C1 시스템의 TCB는 사용자가 지명된 개인이나 정의도니 그룹이 객체를 공유하도록 명시하고 제어할 수 있도록 허용함으로써 사용자와 파일간의 접근을 제어한다. 게다가, 이 TCB는 어떤 사용자가 TCB가 중재할 것으로 기대하는 활동을 시작하기 전에 자신의 신원을 밝힐 것을 요구한다. 이러한 신원 확인은 패스워드 또는 보호 기법을 통해 달성된다. TCB는 인증 데이터를 보호하여 인가받지 않은 사용자들이 접근하지 못하도록 한다.
- C2 등급의 시스템은 C1 시스템의 요구사항에다 개별 접근 제어를 추가한다. 예를 들면, 한 파일에 대한 접근 권한을 단일 사용자 수준까지 명시할 수 있다. 게다가, 시스템 관리자는 개별 신원에 기반을 두고 한 사용자나 여러 사용자들의 활동을 선택적으로 감시할 수 있다. 또한 TCB는 자신의 코드나 데이터 구조의 변경으로부터 자신을 보호한다. 추가로, 시스템으로 반납된 저장 객체를 접근하는 사용자는 이전의 사용자가 생성한 어떠한 정보도 이용할 수 없다.
- 단계 B 강제적 보호 시스템은 C2 시스템의 모든 성질을 포함할 뿐만 아니라 각 객체에 민감도 라벨을 부착한다. B1 등급의 TCB는 시스템 내의 각 객체에 보안 라벨을 유지한다. 라벨은 강제 접근 제어에 속하는 결정을 할 때 사용된다. 예를 들면, 기밀 수준의 한 사용자는 좀 더 민감한 비밀 수준에 있는 파일을 접근할 수 없다. TCB는 또한 사람이 읽을 수 있는 출력물 각 페이지의 위와 아래에 민감도 수준을 표시한다. TCB는 일반적인 사용자 이름-패스워드 인증 정보에 추가하여 각 사용자들의 허가와 인가를 유지하고 또한 최소한 두 수준의 보안을 지원한다. 이들 수준은 계층적이어서 사용자는 자신의 보안 허가와 같거나 낮은 민감도 라벵르 가진 임의의 객체에 접근할 수 있다.
- B2 등급 시스템은 민감도 라벨을 저장 객체와 같은 각 시스템의 자원으로 확장한다. 물리적 장치에는 최소 또는 최대 보안 수준이 할당되는데, 이는 시스템이 물리적 장치가 위치한 물리적 환경에 의해 부가된 제약을 시행하기 위해 사용한다. 게다가, B2 시스템은 숨겨진 채널을 지원하고, 숨겨진 채널을 악용하도록 유도할 가능성이 있는 사건의 감시를 지원한다.
- B3 등급 시스템은 주어진 이름의 객체에 대한 접근이 인가되지 않은 사용자나 그룹을 표시하는 접근-제어 리스트를 생성할 수 있도록 한다. 또한, TCB는 보안 정책 위반을 암시할 수 있는 사건들을 감시하는 기법을 포함한다. 이 기법은 보안 관리자에게 통보하고, 필요하다면 최소한의 혼란을 일으키는 방법으로 사건을 종료할 수도 있다.
- 최상위 수준 등급은 단계 A이다. 등급 A1 시스템은 구적인 면에서 B3 시스템과 기능적으로 동등하다. 그러나 정형화된 설계 명세, 검증 기술을 사용함으로써 TCB가 정확하게 구현되었으리라는 보다 높은 확신을 부여한다. 등급 A1보다 상위의 시스템은 신뢰받는 개인에 의해 신뢰받는 시설 내에서 설계되고 개발될 수 있다.
- TCB의 사용은 단순히 시스템이 보안 정책의 면면을 강요할 수 있음을 확실하게 하는 것에 지나지 않는다. TCB는 보안 정책이 어떻게 되어야 하는지는 명시하지 않는다. 전형적으로 컴퓨팅 환경은 보증을 위한 보안 정책을 개발하고, 그 계획을 보안 기구(NCSC등)에 의해 공인 받는다. 어떤 컴퓨팅 환경은 다른 보증, 이를테면 TEMPEST에 의한 보증과 같은 전자 도청을 방지하는 보증을 요구할 수도 있다.

## Windows XP의 예
- Windows XP의 보안 모델은 일반적인 개념인 사용자 계정에 기반을 둔다. Windows XP는 임의의 수의 사용자 계정을 생성할 수 있도록 하용하며, 이들 계정은 임의의 방식으로 그룹화될 수 있다. 시스템 객체에 대한 접근 요구하는 대로 허용되거나 거부될 수 있다. 사용자는 시스템에서 유일한 보안 ID로 확인된다, 사용자가 로그인할 때 Windows XP는 하나의 보안 접근 토큰을 생성한다. 이 토큰은 사용자를 위한 보안 ID, 그 사용자가 회원으로 되어 있는 모든 그룹을 위한 보안 ID와 그 사용자가 가지고 있는 모든 특별한 특권의 리스트를 포함한다. 특권의 예는 파일과 디렉터리를 백업하고, 컴퓨터를 끄고, 대화식으로 기록하고, 시스템 클록을 변경하는 일을 포함한다. Windows XP가 사용자를 위해 실행하는 모든 프로세스는 접근 토큰의 복사본을 하나 가진다. 시스템은 사용자를 위해 실행하는 모든 프로세스는 접근 토큰의 복사본을 하나 가진다. 시스템은 사용자와 사용자를 위한 프로세스가 객체 접근을 시도할 때마다 그 시스템 객체에 대한 접근을 허용하거나 거부하기 위해 접근 토큰 내의 보안 ID를 사용한다. 사용자 계정의 인증은 비록 Windows XP의 모듈식 설계가 주문형 인증 패키지의 개발을 허용하지만, 전형적으로 사용자 이름과 암호를 통해 성취된다.
- Windows XP는 사용자가 실행하는 프로그램이 시스템에 대해 갖도록 인가 받은 권한보다 더 큰 광범위한 접근을 갖지 않도록 보장하기 위해 서브젝트 개념을 이용한다. 서브젝트는 사용자가 실행하는 각 프로그램을 위한 허가를 추적하고 관리한다. 서브젝트는 사용자의 접근 토큰과 사용자를 대신하여 동작하는 프로그램으로 구성되어 있다. Windows XP는 클라이언트-서버 모델로 작동되기 때문에 접근을 제어하기 위해 두 부류의 서브젝트가 사용된다. 단순한 서브젝트의 예는 사용자가 로그인 후 실행하는 전형적인 애플리케이션이다. 단순한 서브젝트에게는 사용자의 보안 접근 토큰에 기반을 둔 보안 context가 할당된다. 서버 서브젝트는 보호된 서버로 구현된 프로세스로, 클라이언트를 위해 동작할 때 클라이언트의 보안 context를 사용한다. 한 프로세스가 다른 프로세스의 보안 속성을 취할 수 있도록 허용하는 기술은 의인화라고 불린다.
- Windows XP에는 감사가 내장되어 있으며, 많은 일반적인 보안 위협을 감시할 수 있도록 허용하고 있다. 위협을 추적하기 위해 유용한 감사의 예는 무작위한 패스워드 깨기를 탐지하기 위해 로그온과 로그오프 사건에 대한 실패 감사, 바이러스 발생을 추적하기 위해 실행 파일에 성공하거나 실패한 쓰기-접근의 감사등이 있다.
- Windows XP에서 객체의 보안 속성은 보안 디스크립터에 의해 기술된다. 보안 디스크립터는 객체의 소유자의 보안 ID와 오직 POSIX 서브시스템에서만 사용되는 그룹 보안 ID, 어느 사용자 또는 그룹의 접근이 허용되고, 또는 허용되지 않는 지를 나타내는 자유재량의 접근 제어 리스트, 그리고 시스템이 어느 감사 메시지를 생성할 지 제어하는 시스템 접근 제어 리스트를 포함한다. 추가로, 보안 디스크립터는 모든 사람에 의한 감사 쓰기에 대한 시스템 접근 제어 리스트를 가질 수 있다.
- 하나의 접근 제어 리스트는 개인의 보안 ID와 그 객체에 대해 모든 가능한 행동을 정의하는 접근 마스크를 포함한다. 마스크는 각 행동에 대해 접근 허용 혹은, 접근 불허의 값을 가진다. NT의 파일은 자료 읽기, 자료 쓰기, 자료 추가, 실행, 확장 속성 읽기, 확장 속성 쓰기, 속성 읽기, 그리고 속성 쓰기의 접근 유형을 가질 수 있다.
- Windows XP는 객체를 컨테이너 객체와 비컨테이너 객체로 분류한다. 디렉터리 같은 컨테이너 객체는 논리적으로 다른 객체를 포함할 수 있다. 디폴트로, 한 컨테이너 객체 안에서 객체가 생성되면, 새로운 객체는 부모 객체로부터 허가를 상속받는다. 또한 사용자가 파일을 한 디렉터리에서 새로운 디렉터리로 복사하면 그 파일은 목적 디렉터리의 허가를 상속받는다. 비컨테이너 객체는 다른 허가를 상속받지 않는다. 더구나, 한 디렉터리에 대한 허가가 변경되면 새로운 허가가 자동적으로 기존의 파일이나 서브디렉터리에 적용되지는 않는다. 사용자는 원할 경우 그들을 명시적으로 적용할 수 있다.
- Windows XP는 안전한 컴퓨팅 환경을 보장하기 위해 여러 기능을 제공한다. 그렇지만 이들 기능의 다수는 디폴트로 불능화 상태로 되어 있다.
