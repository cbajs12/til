## mapreduce - sort
### secondary sort
- 수행 순서

> 기존 키의 값들을 조합한 복합키를 정의, 키의 값 중에서 어떤 키를 그룹핑 키로 사용할지 결정한다.

> 복합키의 레코드를 정렬하기 위한 `comparator`를 정의

> 그룹핑 키를 파티셔닝할 파티셔너를 정의

> 그룹핑 키를 정렬하기 위한 `comparator`를 정의

- 복합키를 사용하기 위해서는 `WritableComparable` 인터페이스를 구현한다. 또한, readFields, write, compareTo메서드가 구현되어 있어야 한다.
- 복합키 comparator는 두 개의 복합키를 비교하게 되며, 각 멤버 변수를 비교해 정렬 순서를 정한다.
- 파티셔너는 맵 태스크의 출력 데이터를 리듀스 태스크의 입력 데이터로 보낼지 결정하고, 파티셔닝된 데이터는 맵 태스크의 출력 데이터의 키의 값에 따라 정렬된다.

### partial Sort
- 매퍼의 출력 데이터를 맵파일로 변경해 데이터를 검색하는 방법이다.
- 맵 태스크가 실행될 때 파티셔너는 매퍼의 출력 데이터가 어떤 리듀스 태스크로 전달될지 결정하고, 파티셔닝된 데이터는 키에 따라 정렬된다.

### total Sort
- 분산 처리의 장점을 살리면서 전체 정렬하기

> 입력 데이터를 샘플링해서 데이터의 분포도를 조사

> 데이터의 분포도에 맞게 파티션 정보를 미리 생성

> 미리 생성한 파티션 정보에 맞게 출력 데이터를 생성

> 각 출력 데이터를 병합